# Cyber Threat Forecasting & Backtesting Strategy

현재 시스템에 확보된 3개 데이터셋(MITRE, CISA KEV, EPSS)은 모두 타임스탬프를 포함하고 있습니다. 이를 활용하여 **"2023년 지식만으로 미래를 예측하고, 실존하는 2024-2026년 데이터로 검증"**하는 시뮬레이션 환경 구축 전략을 제안합니다.

## 1. 데이터 시계열 분리 (Time-Slicing)

가장 먼저 수행해야 할 작업은 데이터를 시간 기준으로 엄격히 분리하는 것입니다.

| 데이터셋 | 기준 필드 | 처리 방식 |
| :--- | :--- | :--- |
| **MITRE ATT&CK** | `created`, `modified` | 2023년 12월 31일 이전 생성/수정된 기법만 지식 베이스로 사용 |
| **CISA KEV** | `dateAdded` | 2024년 이후 추가된 취약점은 에이전트에게 숨기고 검증용으로만 사용 |
| **EPSS** | `score_date` | 2023년 말 기준의 스코어 데이터 확보 (API 또는 과거 CSV 활용) |

---

## 2. 이중 지식 베이스 아키텍처 (Dual-RAG)

Qdrant에 두 개의 컬렉션을 생성하여 에이전트의 접근 권한을 제어합니다.

1.  **Collection A: `cyber_intel_2023` (훈련 데이터)**
    -   2023년까지의 모든 위협 지식.
    -   에이전트가 분석 및 예측 시 사용하는 **유일한** 검색 도구.
2.  **Collection B: `cyber_intel_actual` (검증 데이터)**
    -   2024년 1월 ~ 현재(2026년)까지의 데이터.
    -   에이전트에게는 노출되지 않으며, **최종 검증(Evaluation)** 단계에서만 시스템이 조회.

---

## 3. 시뮬레이션 워크플로우 (Agents Loop)

에이전트들이 다음과 같은 순서로 작업을 수행하도록 파이프라인을 설계합니다.

### 1단계: 트렌드 분석 (Forecasting Phase)
-   **에이전트**: `Forecasting Expert`
-   **입력**: 2023년 지식 베이스
-   **작업**: "2023년까지의 공격 패턴과 취약점 증가 추세를 바탕으로, 향후 3년간(2024-2026) 가장 유망한(?) 공격 기법 5가지와 타겟 산업군을 예측하라."

### 2단계: 예측 리스트 생성
-   취약점이 발생할 것으로 예상되는 예상 CVE 군, 또는 악용될 MITRE 기법 ID를 리스트업합니다.

### 3단계: 실제 데이터 대조 (Verification Phase)
-   **에이전트**: `Validator Expert` (또는 시스템 로직)
-   **작업**: 예측 리스트를 `cyber_intel_actual` 컬렉션과 대조합니다.
-   **평가 지표**: 
    -   **Precision**: 에이전트가 위험하다고 예측한 기법이 실제로 CISA KEV에 등록되었는가?
    -   **Recall**: 실제 2024-2026년에 발생한 주요 사고를 2023년 데이터 기반으로 예견할 수 있었는가?

---

## 4. 구현을 위한 기술적 제안

1.  **전처리 스크립트 작성**: 
    -   `scripts/split_by_time.go`를 작성하여 원본 JSON/CSV에서 2023년 이전/이후 데이터를 분리하여 별도 파일로 저장합니다.
2.  **에이전트 컨텍스트 제어**:
    -   `config.yaml`에서 에이전트가 사용하는 `embedding_source`를 `cyber_intel_2023`으로 고정합니다.
3.  **보고서 작성 템플릿**:
    -   "2023 Intel 기반 예측" 섹션과 "2026년 관점에서의 실제 검증" 섹션을 구분하여 작성하도록 유도합니다.

## 제안하는 다음 단계
이 시뮬레이션을 위해 **가장 먼저 2023년 데이터와 이후 데이터를 분리하는 필터링 스크립트**를 작성해 드릴까요? 아니면 이 아키텍처를 `Super Agent`의 로직에 직접 반영할까요?
